!function(){"use strict";!function(){const t=new Image;t.src="./assets/images/player.png";const i=new Image;i.src="./assets/images/player-alt.png";class s{constructor(t){this.velocityL=0,this.velocityR=0,this.paddling=!1,this.dimensions={width:t.width,height:t.height},this.position={vertical:this.dimensions.height/2+100,horizontal:this.dimensions.width/2-65},this.ctx=t.getContext("2d"),this.left,this.top,this.bottom,this.left,this.width=140,this.height=140}drawPlayer(s){this.paddling?s.drawImage(i,this.position.horizontal,this.position.vertical,this.width,this.height):s.drawImage(t,this.position.horizontal,this.position.vertical,this.width,this.height)}animate(){this.move(),this.drawPlayer(this.ctx)}move(){this.checkBoundaries(),this.position.horizontal+=this.velocityL,this.position.horizontal+=this.velocityR}checkBoundaries(){this.left=this.position.horizontal+60,this.right=this.position.horizontal+90,this.top=this.position.vertical+10,this.bottom=this.position.vertical+110,this.position.horizontal<0&&(this.velocityL=0),this.position.horizontal+150>this.dimensions.width&&(this.velocityR=0)}}const e=new Image;e.src="./assets/images/water/bubble.png";class h{constructor(t,i){this.velocity=2,this.dimensions={width:t.width,height:t.height},this.x=i.x,this.y=i.y,this.left,this.top,this.bottom,this.left,this.ctx=t.getContext("2d"),this.height=50,this.width=50,this.radius=25,this.caught=!1}animate(){this.top=this.y,this.right=this.x+this.width,this.bottom=this.y+this.height,this.left=this.x,this.ctx.drawImage(e,this.x,this.y,this.width,this.height)}}class o{constructor(t,i,s){this.velocity=2,this.dimensions={width:t.width,height:t.height},this.x=s.x,this.y=s.y,this.left,this.top,this.bottom,this.left,this.ctx=t.getContext("2d"),this.image=i,this.height=120,this.width=120}animate(){this.top=this.y+10,this.right=this.x+this.width-15,this.bottom=this.y+this.height-10,this.left=this.x+15,this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}}class n{constructor(t,i,s){this.velocity=2,this.dimensions={width:t.width,height:t.height},this.x=s.x,this.y=s.y,this.ctx=t.getContext("2d"),this.image=i}animate(){this.ctx.drawImage(this.image,this.x,this.y,this.dimensions.width,this.dimensions.height)}}function a(t,i){return Math.floor(Math.random()*(i-t+1)+t)}function r(t){return t[Math.floor(Math.random()*t.length)]}const c=new Image;c.src="./assets/images/solids/rock1.png";const l=new Image;l.src="./assets/images/solids/rock2.png";const d=new Image;d.src="./assets/images/solids/rock3.png";const m=[c,l,d],u=new Image;u.src="./assets/images/water/water.jpg";const g=new Image;g.src="./assets/images/water/image.png",new Audio("./assets/audio/bubble-sound.mp3");class y{constructor(t){this.dimensions={width:t.width,height:t.height},this.rivers=[],this.riverInit(t),this.rocks=[],this.rockInit(t,m,this.rockPositions),this.bubbles=[],this.bubbleInit(t,this.bubblePositions)}rockInit(t,i,s){for(let e=0;e<3;e++)this.rocks.push(new o(t,r(i),s()[e]))}bubbleInit(t,i){for(let s=0;s<4;s++)this.bubbles.push(new h(t,i()[s]))}riverInit(t){this.rivers.push(new n(t,u,{x:0,y:0})),this.rivers.push(new n(t,g,{x:0,y:-this.dimensions.height}))}animate(){this.moveRiver(),this.moveRocks(),this.moveBubbles(),this.rivers.forEach((t=>{t.animate()})),this.rocks.forEach((t=>{t.animate()})),this.bubbles.forEach((t=>{t.animate()}))}moveRiver(){if(this.rivers.forEach((t=>{t.y+=2})),this.rivers[0].y>=500){let t;t=this.rivers[0].image===u?u:g,this.rivers.shift(),this.rivers.push(new n(canvas,t,{x:0,y:-this.dimensions.height}))}}moveRocks(){this.rocks.forEach((t=>{t.y+=3})),this.rocks[0].y>=500&&(this.rocks.shift(),this.rocks.push(new o(canvas,r(m),{x:a(10,this.dimensions.width-120),y:-150})))}moveBubbles(){this.bubbles.forEach(((t,i)=>{t.caught&&(this.bubbles.splice(i,1),this.bubbles.push(new h(canvas,{x:a(10,this.dimensions.width-120),y:-200}))),t.y+=3})),this.bubbles[0].y>=500&&(this.bubbles.shift(),this.bubbles.push(new h(canvas,{x:a(10,this.dimensions.width-120),y:-150})))}rockPositions(){return[{x:100,y:-100},{x:300,y:-300},{x:500,y:-500}]}bubblePositions(){return[{x:200,y:-100},{x:250,y:-150},{x:130,y:-200},{x:310,y:-270}]}}(new Image).src="./assets/images/water/water.jpg";const p=new Audio("./assets/audio/bubble-sound2.mp3"),b=document.querySelector(".main-container");let w=document.createElement("section"),v=document.createElement("h3"),f=document.createElement("h3");class x{constructor(t){this.ctx=t.getContext("2d"),this.dimensions={width:t.width,height:t.height},this.canvas=t,this.score=0,this.lives=3,this.paused=!1,this.numOfPauses=0,this.collisionOccured=!1,this.listenForPauseEvent(),this.eventListeners(),w.setAttribute("id","player-stat-container"),v.setAttribute("id","score"),f.setAttribute("id","lives"),b.prepend(w),w.append(f,v),this.gameOff=!1,this.play()}animate(t){this.gameOff||(t.clearRect(0,0,this.dimensions.width,this.dimensions.height),this.gameView.animate(),this.renderScore(),this.renderLives(),this.player.animate(),this.checkRockCollisions(),this.checkBubbleCollisions(),this.frameId=requestAnimationFrame(this.animate.bind(this,t)))}play(){this.player=new s(this.canvas),this.gameView=new y(canvas),this.playing=!0,this.animate(this.ctx)}renderScore(){v.innerHTML=`${this.score}`}renderLives(){f.innerHTML=`<i id="heart-icon" class="fa-solid fa-heart"></i>${this.lives}`}listenForPauseEvent(){addEventListener("keydown",(t=>{"KeyP"!==t.code||this.gameOff||(this.numOfPauses++,this.numOfPauses<3&&this.togglePause())}))}restart(){this.gameOff=!1,w.remove(),w=document.createElement("section"),f=document.createElement("h3"),v=document.createElement("h3"),w.setAttribute("id","player-stat-container"),f.setAttribute("id","lives"),v.setAttribute("id","score")}togglePause(){const t=document.querySelector("#pause-modal-container"),i=document.querySelector("#countdown"),s=document.querySelector("#pause-header");if(this.paused){let e=3;s.innerHTML="Resume in:";const h=setInterval((()=>{e<=0&&(clearInterval(h),s.innerHTML="Paused",this.numOfPauses=0,this.paused=!1,t.style.display="none",requestAnimationFrame(this.animate.bind(this,this.ctx))),i.innerHTML=`${e}`,e--}),1e3)}else this.paused=!0,t.style.display="flex",i.innerHTML="",cancelAnimationFrame(this.frameId)}eventListeners(){addEventListener("keydown",(t=>{"ArrowLeft"===t.code&&(this.player.velocityL=-3,this.player.paddling=!0),"ArrowRight"===t.code&&(this.player.velocityR=3,this.player.paddling=!0)})),addEventListener("keyup",(t=>{"ArrowLeft"===t.code&&(this.player.velocityL=0,this.player.paddling=!1),"ArrowRight"===t.code&&(this.player.velocityR=0,this.player.paddling=!1)}))}collided(t,i){return!(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top)}checkRockCollisions(){let t=!1;for(let i of this.gameView.rocks)if(this.collided(i,this.player)){if(t=!0,this.lives>0&&!this.collisionOccured){this.lives--,this.collisionOccured=!0;break}if(this.lives>0&&this.collisionOccured)break;this.gameOff=!0,document.querySelector("#game-over-modal").style.display="flex";break}t||(this.collisionOccured=!1)}checkBubbleCollisions(){this.gameView.bubbles.forEach(((t,i)=>{this.collided(t,this.player)&&(p.play(),this.score++,this.gameView.bubbles[i].caught=!0)}))}}const k=document.querySelector(".main-container"),I=document.getElementById("canvas");I.width=700,I.height=500;const L=document.querySelector("#home-page"),E=document.querySelector("#play-btn"),P=document.querySelector("#play-again-btn"),A=document.querySelector("#go-to-hp-btn"),R=document.querySelector("#game-over-modal");let O;E.addEventListener("click",(t=>{L.style.display="none",O=new x(I),k.style.display="flex"})),P.addEventListener("click",(t=>{R.style.display="none",O=new x(I)})),A.addEventListener("click",(t=>{L.style.display="flex",k.style.display="none",R.style.display="none"}))}()}();
//# sourceMappingURL=main.js.map