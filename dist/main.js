!function(){"use strict";!function(){const e=new Image;e.src="./assets/images/player.png";const t=new Image;t.src="./assets/images/player-alt.png";const i=new Image;i.src="./assets/images/hurt-player.png";const s=new Image;s.src="./assets/images/hurt-player-alt.png";class h{constructor(e){this.velocityL=0,this.velocityR=0,this.paddling=!1,this.dimensions={width:e.width,height:e.height},this.position={vertical:this.dimensions.height/2+150,horizontal:this.dimensions.width/2-65},this.ctx=e.getContext("2d"),this.left,this.top,this.bottom,this.left,this.width=140,this.height=120,this.image,this.hurt=!1}determineImage(){this.paddling&&!this.hurt?this.image=t:this.paddling||this.hurt?this.paddling&&this.hurt?this.image=s:this.image=i:this.image=e}drawPlayer(e){this.determineImage(),e.drawImage(this.image,this.position.horizontal,this.position.vertical,this.width,this.height)}animate(){this.move(),this.drawPlayer(this.ctx)}move(){this.checkBoundaries(),this.position.horizontal+=this.velocityL,this.position.horizontal+=this.velocityR}checkBoundaries(){this.left=this.position.horizontal+60,this.right=this.position.horizontal+90,this.top=this.position.vertical+15,this.bottom=this.position.vertical+105,this.position.horizontal<0&&(this.velocityL=0),this.position.horizontal+140>this.dimensions.width&&(this.velocityR=0)}}class o{constructor(e,t,i,s){this.image=i,this.velocity=t,this.dimensions={width:e.width,height:e.height},this.x=s.x,this.y=s.y,this.left,this.top,this.bottom,this.left,this.ctx=e.getContext("2d"),this.height=50,this.width=50,this.caught=!1}animate(){this.top=this.y,this.right=this.x+this.width,this.bottom=this.y+this.height,this.left=this.x,this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}}class a extends o{}class n extends o{}class r{constructor(e,t,i,s){this.velocity=t,this.dimensions={width:e.width,height:e.height},this.x=s.x,this.y=s.y,this.left,this.top,this.bottom,this.left,this.ctx=e.getContext("2d"),this.image=i,this.height=120,this.width=120}animate(){this.top=this.y+15,this.right=this.x+this.width-20,this.bottom=this.y+this.height-15,this.left=this.x+20,this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}}class l{constructor(e,t,i,s){this.velocity=t,this.dimensions={width:e.width,height:e.height},this.x=s.x,this.y=s.y,this.ctx=e.getContext("2d"),this.image=i}animate(){this.ctx.drawImage(this.image,this.x,this.y,this.dimensions.width,this.dimensions.height)}}function c(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function d(e){return e[Math.floor(Math.random()*e.length)]}const m=new Image;m.src="./assets/images/solids/rock1.png";const u=new Image;u.src="./assets/images/solids/rock2.png";const y=new Image;y.src="./assets/images/solids/rock2.png";const p=[m,u,y],g=new Image;g.src="./assets/images/water/water.jpg";const v=new Image;v.src="./assets/images/water/image.png";const w=new Image;w.src="./assets/images/red-cross.png";const f=new Image;f.src="./assets/images/water/bubble.png";class b{constructor(e){this.canvas=e,this.rockBubbleRedCrossVelo=3,this.riverVelo=2,this.dimensions={width:e.width,height:e.height},this.rivers=[],this.riverInit(e),this.rocks=[],this.rockInit(e,p,this.rockPositions),this.catchables=[],this.velocityTracker=2,this.bubbleInit(e,this.bubblePositions)}rockInit(e,t,i){for(let s=0;s<3;s++)this.rocks.push(new r(e,this.rockBubbleRedCrossVelo,d(t),i()[s]))}bubbleInit(e,t){for(let i=0;i<4;i++)this.catchables.push(new a(e,this.rockBubbleRedCrossVelo,f,t()[i]))}redCrossInit(){let e=c(0,800);this.catchables.push(new n(this.canvas,this.rockBubbleRedCrossVelo,w,{x:e,y:-10*this.velocityTracker}))}riverInit(e){this.rivers.push(new l(e,this.riverVelo,g,{x:0,y:0})),this.rivers.push(new l(e,this.riverVelo,v,{x:0,y:-this.dimensions.height})),this.rivers.push(new l(e,this.riverVelo,g,{x:0,y:-2*this.dimensions.height})),this.rivers.push(new l(e,this.riverVelo,v,{x:0,y:-3*this.dimensions.height})),this.rivers.push(new l(e,this.riverVelo,g,{x:0,y:-4*this.dimensions.height})),this.rivers.push(new l(e,this.riverVelo,v,{x:0,y:-5*this.dimensions.height})),this.rivers.push(new l(e,this.riverVelo,g,{x:0,y:-6*this.dimensions.height})),this.rivers.push(new l(e,this.riverVelo,v,{x:0,y:-7*this.dimensions.height}))}animate(){const e=[this.rivers,this.rocks];this.moveUncatchables(e),this.moveCatchables();for(let t of e)t.forEach((e=>e.animate()));this.catchables.forEach((e=>{e instanceof a&&e.animate()}))}animateRedCross(){this.catchables.forEach((e=>{e instanceof n&&e.animate()}))}moveUncatchables(e){for(let t of e)t.forEach((e=>e.y+=e.velocity));this.newRiver(),this.newRock()}newRiver(){if(this.rivers[0].y>=600){let e;e=this.rivers[0].image===g?v:g,this.rivers.push(new l(canvas,this.riverVelo,e,{x:0,y:this.rivers[this.rivers.length-1].y-this.dimensions.height+this.riverVelo})),this.rivers.shift()}}newRock(){this.rocks[0].y>=600&&(this.rocks.shift(),this.rocks.push(new r(canvas,this.rockBubbleRedCrossVelo,d(p),{x:c(10,this.dimensions.width-120),y:-150})))}moveCatchables(){this.catchables.forEach(((e,t)=>{e.caught&&(e instanceof a?(this.catchables.splice(t,1),this.catchables.push(new a(canvas,this.rockBubbleRedCrossVelo,f,{x:c(10,this.dimensions.width-120),y:-200}))):e instanceof n&&this.catchables.splice(t,1)),e.y+=e.velocity})),this.newCatchable()}newCatchable(){this.catchables[0].y>=600&&(this.catchables[0]instanceof a?(this.catchables.shift(),this.catchables.push(new a(canvas,this.rockBubbleRedCrossVelo,f,{x:c(10,this.dimensions.width-120),y:-150}))):this.catchables[0]instanceof n&&this.catchables.shift())}increaseVelocities(e){this.riverVelo+=this.velocityTracker,this.rockBubbleRedCrossVelo+=this.velocityTracker;for(let t of e)for(let e of t)e.velocity=e instanceof l?this.riverVelo:this.rockBubbleRedCrossVelo}decreaseVelocities(e){this.riverVelo=2,this.rockBubbleRedCrossVelo=3,this.velocityTracker+=2;for(let t of e)for(let e of t)e.velocity=e instanceof l?this.riverVelo:this.rockBubbleRedCrossVelo}rockPositions(){return[{x:100,y:-100},{x:300,y:-300},{x:500,y:-500}]}bubblePositions(){return[{x:200,y:-100},{x:250,y:-150},{x:130,y:-200},{x:310,y:-270}]}}const x=new Audio("./assets/audio/bubble-sound2.mp3"),V=new Audio("./assets/audio/collect-life.mp3"),k=new Audio("./assets/audio/ough.mp3"),C=new Audio("./assets/audio/woho.mp3"),R=new Audio("assets/audio/nobm.mp3"),L=new Audio("assets/audio/game-over.mp3");let I=document.querySelector("#player-stat-container"),T=document.createElement("h3"),S=document.createElement("h3"),E=document.createElement("button");E.innerHTML="<i id='mute-game' class='fa-solid fa-volume-xmark'></i>";let q=document.createElement("button");q.innerHTML="<i id='unmute-game' class='fa-solid fa-volume-high'></i>",q.style.display="none";const A=document.querySelector("#alert-msg-container"),B=document.querySelector("#alert"),M=document.querySelector("#alert-message");class O{constructor(e){this.ctx=e.getContext("2d"),this.dimensions={width:e.width,height:e.height},this.canvas=e,this.score=0,this.lives=3,this.paused=!1,this.muted=!1,this.numOfPauses=0,this.timeCounter=0,this.playerVelo=3,this.fastRiverFlowTime=0,this.bubbleValue=1,this.secondsLeftBeforeSpeedIncrease=300,this.collisionOccured=!1,this.listenForPauseEvent(),this.eventListeners(),T.setAttribute("id","score"),S.setAttribute("id","lives"),I.append(S,T,E,q),this.gameOff=!1,this.play()}animate(e){this.gameOff||(e.clearRect(0,0,this.dimensions.width,this.dimensions.height),this.gameView.animate(),this.bubbleValue>=2&&this.gameView.animateRedCross(),this.renderScore(),this.renderLives(),this.player.animate(),this.checkRockCollisions(),this.checkCatchableCollisions(),!this.paused&&this.timeCounter<1800&&0===this.fastRiverFlowTime&&this.timeCounter++,!this.paused&&this.timeCounter>=1500&&0===this.fastRiverFlowTime&&(A.style.display="flex",B.innerHTML="ALERT!",M.innerHTML="Stream speed will increase soon",this.secondsLeftBeforeSpeedIncrease--),this.timeCounter>=1800&&!this.gameOff&&0===this.fastRiverFlowTime&&(this.timeCounter=0,this.increaseVelocity()),!this.paused&&this.fastRiverFlowTime<900&&0===this.timeCounter&&this.fastRiverFlowTime++,!this.paused&&this.fastRiverFlowTime>=900&&0===this.timeCounter&&(this.fastRiverFlowTime=0,this.decreaseVelocity()),this.bubbleValue>=2&&0===this.timeCounter&&0===this.fastRiverFlowTime&&this.gameView.redCrossInit(),this.frameId=requestAnimationFrame(this.animate.bind(this,e)))}play(){this.player=new h(this.canvas),this.gameView=new b(canvas),this.playing=!0,this.animate(this.ctx),setTimeout((()=>{R.volume=.2,R.loop=!0,R.play()}),500)}renderScore(){T.innerHTML=`${this.score}`}renderLives(){S.innerHTML=`<i id="heart-icon" class="fa-solid fa-heart"></i>${this.lives}`}listenForPauseEvent(){addEventListener("keydown",(e=>{"Space"!==e.code||this.gameOff||(this.numOfPauses++,this.numOfPauses<3&&this.togglePause())}))}restart(){this.gameOff=!1,I.remove(),I=document.createElement("section"),S=document.createElement("h3"),T=document.createElement("h3"),I.setAttribute("id","player-stat-container"),S.setAttribute("id","lives"),T.setAttribute("id","score")}togglePause(){const e=document.querySelector("#pause-modal-container"),t=document.querySelector("#countdown"),i=document.querySelector("#pause-header");if(this.paused){this.muted||(R.volume=.2,R.loop=!0,R.play());let s=3;i.innerHTML="Resume in:";const h=setInterval((()=>{s<=0&&(clearInterval(h),i.innerHTML="Paused",this.numOfPauses=0,this.paused=!1,e.style.display="none",requestAnimationFrame(this.animate.bind(this,this.ctx))),t.innerHTML=`${s}`,s--}),1e3)}else R.pause(),this.paused=!0,e.style.display="flex",t.innerHTML="",cancelAnimationFrame(this.frameId)}increaseVelocity(){A.style.display="none",this.secondsLeftBeforeSpeedIncrease=300,this.bubbleValue++,this.bubbleValue%2==0&&this.playerVelo++,C.play(),this.gameView.increaseVelocities([this.gameView.rocks,this.gameView.catchables,this.gameView.rivers])}decreaseVelocity(){this.gameView.decreaseVelocities([this.gameView.rocks,this.gameView.catchables,this.gameView.rivers])}eventListeners(){addEventListener("keydown",(e=>{"ArrowLeft"===e.code&&(this.fastRiverFlowTime<900&&0===this.timeCounter?this.player.velocityL=-this.playerVelo:this.player.velocityL=-3,this.player.paddling=!0),"ArrowRight"===e.code&&(this.fastRiverFlowTime<900&&0===this.timeCounter?this.player.velocityR=this.playerVelo:this.player.velocityR=3,this.player.paddling=!0)})),addEventListener("keyup",(e=>{"ArrowLeft"===e.code&&(this.player.velocityL=0,this.player.paddling=!1),"ArrowRight"===e.code&&(this.player.velocityR=0,this.player.paddling=!1)})),addEventListener("keydown",(e=>{"KeyM"!==e.code||this.gameOff||(!1===this.muted?(this.muted=!0,E.style.display="none",q.style.display="flex",R.pause()):(this.muted=!1,q.style.display="none",E.style.display="flex",R.volume=.2,R.loop=!0,R.play()))}))}collided(e,t){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}checkRockCollisions(){let e=!1;for(let t of this.gameView.rocks)if(this.collided(t,this.player)){if(e=!0,this.lives>0&&!this.collisionOccured){this.player.hurt=!0,setTimeout((()=>{this.player.hurt=!1}),700),this.lives>1&&k.play(),this.lives--,this.collisionOccured=!0;break}if(this.lives>0&&this.collisionOccured)break;R.pause(),this.gameOff=!0,document.querySelector("#final-score").innerHTML=`${this.score}`,document.querySelector("#game-over-modal").style.display="flex",L.play();break}e||(this.collisionOccured=!1)}checkCatchableCollisions(){this.gameView.catchables.forEach(((e,t)=>{this.collided(e,this.player)&&(e instanceof a?(x.play(),this.gameView.catchables[t].caught=!0,this.score+=this.bubbleValue):e instanceof n&&(V.play(),this.gameView.catchables[t].caught=!0,this.lives++))}))}}const F=document.querySelector(".main-container"),P=document.getElementById("canvas");P.width=800,P.height=600;const H=new Audio("assets/audio/highflow-river.mp3"),z=document.querySelector("#home-page"),$=document.querySelector("#how-to-page"),j=document.querySelector("#play-btn"),U=document.querySelector("#how-to-btn"),D=document.querySelector("#go-back-btn"),K=document.querySelector("#play-again-btn"),G=document.querySelector("#go-to-hp-btn"),J=document.querySelector("#game-over-modal"),N=document.querySelector("#hp-options"),Q=document.querySelector("#loader"),W=document.querySelector("#body"),X=document.querySelector("#mute"),Y=document.querySelector("#unmute");let Z;addEventListener("DOMContentLoaded",(e=>{setTimeout((()=>{W.style.backgroundImage="url('assets/images/bg-img3.jpg')"}),1e3)})),j.addEventListener("click",(e=>{N.style.display="none",Q.style.display="flex",setTimeout((()=>{z.style.display="none",H.pause(),F.style.display="flex",Z=new O(P)}),2e3)})),X.addEventListener("click",(()=>{X.style.display="none",Y.style.display="flex",H.pause()})),Y.addEventListener("click",(()=>{Y.style.display="none",X.style.display="flex",H.loop=!0,H.play()})),U.addEventListener("click",(e=>{z.style.display="none",$.style.display="flex"})),D.addEventListener("click",(e=>{$.style.display="none",z.style.display="flex"})),K.addEventListener("click",(e=>{J.style.display="none",Z=new O(P)})),G.addEventListener("click",(e=>{z.style.display="flex",N.style.display="flex",Q.style.display="none",X.style.display="none",Y.style.display="flex",F.style.display="none",J.style.display="none"}))}()}();
//# sourceMappingURL=main.js.map