!function(){"use strict";!function(){const e=new Image;e.src="./assets/images/player.png";const t=new Image;t.src="./assets/images/player-alt.png";class i{constructor(e){this.velocityL=0,this.velocityR=0,this.paddling=!1,this.dimensions={width:e.width,height:e.height},this.position={vertical:this.dimensions.height/2+150,horizontal:this.dimensions.width/2-65},this.ctx=e.getContext("2d"),this.left,this.top,this.bottom,this.left,this.width=140,this.height=120}drawPlayer(i){this.paddling?i.drawImage(t,this.position.horizontal,this.position.vertical,this.width,this.height):i.drawImage(e,this.position.horizontal,this.position.vertical,this.width,this.height)}animate(){this.move(),this.drawPlayer(this.ctx)}move(){this.checkBoundaries(),this.position.horizontal+=this.velocityL,this.position.horizontal+=this.velocityR}checkBoundaries(){this.left=this.position.horizontal+60,this.right=this.position.horizontal+90,this.top=this.position.vertical+15,this.bottom=this.position.vertical+105,this.position.horizontal<0&&(this.velocityL=0),this.position.horizontal+140>this.dimensions.width&&(this.velocityR=0)}}class s{constructor(e,t,i,s){this.image=i,this.velocity=t,this.dimensions={width:e.width,height:e.height},this.x=s.x,this.y=s.y,this.left,this.top,this.bottom,this.left,this.ctx=e.getContext("2d"),this.height=50,this.width=50,this.caught=!1}animate(){this.top=this.y,this.right=this.x+this.width,this.bottom=this.y+this.height,this.left=this.x,this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}}class o extends s{}class h extends s{}class a{constructor(e,t,i,s){this.velocity=t,this.dimensions={width:e.width,height:e.height},this.x=s.x,this.y=s.y,this.left,this.top,this.bottom,this.left,this.ctx=e.getContext("2d"),this.image=i,this.height=120,this.width=120}animate(){this.top=this.y+15,this.right=this.x+this.width-20,this.bottom=this.y+this.height-15,this.left=this.x+20,this.ctx.drawImage(this.image,this.x,this.y,this.width,this.height)}}class n{constructor(e,t,i,s){this.velocity=t,this.dimensions={width:e.width,height:e.height},this.x=s.x,this.y=s.y,this.ctx=e.getContext("2d"),this.image=i}animate(){this.ctx.drawImage(this.image,this.x,this.y,this.dimensions.width,this.dimensions.height+200)}}function l(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function r(e){return e[Math.floor(Math.random()*e.length)]}const c=new Image;c.src="./assets/images/solids/rock1.png";const d=new Image;d.src="./assets/images/solids/rock2.png";const m=new Image;m.src="./assets/images/solids/rock2.png";const u=[c,d,m],y=new Image;y.src="./assets/images/water/water.jpg";const p=new Image;p.src="./assets/images/water/image.png";const g=new Image;g.src="./assets/images/red-cross.png";const f=new Image;f.src="./assets/images/water/bubble.png";class v{constructor(e){this.canvas=e,this.rockBubbleRedCrossVelo=3,this.riverVelo=2,this.dimensions={width:e.width,height:e.height},this.rivers=[],this.riverInit(e),this.rocks=[],this.rockInit(e,u,this.rockPositions),this.catchables=[],this.velocityTracker=2,this.bubbleInit(e,this.bubblePositions)}rockInit(e,t,i){for(let s=0;s<3;s++)this.rocks.push(new a(e,this.rockBubbleRedCrossVelo,r(t),i()[s]))}bubbleInit(e,t){for(let i=0;i<4;i++)this.catchables.push(new o(e,this.rockBubbleRedCrossVelo,f,t()[i]))}redCrossInit(){let e=l(0,800);this.catchables.push(new h(this.canvas,this.rockBubbleRedCrossVelo,g,{x:e,y:-10*this.velocityTracker}))}riverInit(e){this.rivers.push(new n(e,this.riverVelo,y,{x:0,y:-200})),this.rivers.push(new n(e,this.riverVelo,p,{x:0,y:-(this.dimensions.height+200)}))}animate(){const e=[this.rivers,this.rocks];this.moveUncatchables(e),this.moveCatchables();for(let t of e)t.forEach((e=>e.animate()));this.catchables.forEach((e=>{e instanceof o&&e.animate()}))}animateRedCross(){this.catchables.forEach((e=>{e instanceof h&&e.animate()}))}moveUncatchables(e){for(let t of e)t.forEach((e=>e.y+=e.velocity));this.newRiver(),this.newRock()}newRiver(){if(this.rivers[0].y>=600){let e;e=this.rivers[0].image===y?y:p,this.rivers.shift(),this.rivers.push(new n(canvas,this.riverVelo,e,{x:0,y:-(this.dimensions.height+200)}))}}newRock(){this.rocks[0].y>=600&&(this.rocks.shift(),this.rocks.push(new a(canvas,this.rockBubbleRedCrossVelo,r(u),{x:l(10,this.dimensions.width-120),y:-150})))}moveCatchables(){this.catchables.forEach(((e,t)=>{e.caught&&(e instanceof o?(this.catchables.splice(t,1),this.catchables.push(new o(canvas,this.rockBubbleRedCrossVelo,f,{x:l(10,this.dimensions.width-120),y:-200}))):e instanceof h&&this.catchables.splice(t,1)),e.y+=e.velocity})),this.newCatchable()}newCatchable(){this.catchables[0].y>=600&&(this.catchables[0]instanceof o?(this.catchables.shift(),this.catchables.push(new o(canvas,this.rockBubbleRedCrossVelo,f,{x:l(10,this.dimensions.width-120),y:-150}))):this.catchables[0]instanceof h&&this.catchables.shift())}increaseVelocities(e){this.riverVelo+=this.velocityTracker,this.rockBubbleRedCrossVelo+=this.velocityTracker;for(let t of e)for(let e of t)e.velocity=e instanceof n?this.riverVelo:this.rockBubbleRedCrossVelo}decreaseVelocities(e){this.riverVelo=2,this.rockBubbleRedCrossVelo=3,this.velocityTracker+=2;for(let t of e)for(let e of t)e.velocity=e instanceof n?this.riverVelo:this.rockBubbleRedCrossVelo}rockPositions(){return[{x:100,y:-100},{x:300,y:-300},{x:500,y:-500}]}bubblePositions(){return[{x:200,y:-100},{x:250,y:-150},{x:130,y:-200},{x:310,y:-270}]}}const b=new Audio("./assets/audio/bubble-sound2.mp3"),w=new Audio("./assets/audio/collect-life.mp3"),x=new Audio("./assets/audio/ough.mp3"),k=new Audio("./assets/audio/woho.mp3"),V=new Audio("assets/audio/nobm.mp3"),C=new Audio("assets/audio/game-over.mp3");let R=document.querySelector("#player-stat-container"),L=document.createElement("h3"),I=document.createElement("h3"),T=document.createElement("button");T.innerHTML="<i id='mute-game' class='fa-solid fa-volume-xmark'></i>";let S=document.createElement("button");S.innerHTML="<i id='unmute-game' class='fa-solid fa-volume-high'></i>",S.style.display="none";const E=document.querySelector("#alert-msg-container"),q=document.querySelector("#alert"),A=document.querySelector("#alert-message");class B{constructor(e){this.ctx=e.getContext("2d"),this.dimensions={width:e.width,height:e.height},this.canvas=e,this.score=0,this.lives=3,this.paused=!1,this.muted=!1,this.numOfPauses=0,this.timeCounter=0,this.playerVelo=3,this.fastRiverFlowTime=0,this.bubbleValue=1,this.secondsLeftBeforeSpeedIncrease=300,this.collisionOccured=!1,this.listenForPauseEvent(),this.eventListeners(),L.setAttribute("id","score"),I.setAttribute("id","lives"),R.append(I,L,T,S),this.gameOff=!1,this.play()}animate(e){this.gameOff||(e.clearRect(0,0,this.dimensions.width,this.dimensions.height),this.gameView.animate(),this.bubbleValue>=2&&this.gameView.animateRedCross(),this.renderScore(),this.renderLives(),this.player.animate(),this.checkRockCollisions(),this.checkCatchableCollisions(),!this.paused&&this.timeCounter<1800&&0===this.fastRiverFlowTime&&this.timeCounter++,!this.paused&&this.timeCounter>=1500&&0===this.fastRiverFlowTime&&(E.style.display="flex",q.innerHTML="ALERT!",A.innerHTML="Stream speed will increase soon",this.secondsLeftBeforeSpeedIncrease--),this.timeCounter>=1800&&!this.gameOff&&0===this.fastRiverFlowTime&&(this.timeCounter=0,this.increaseVelocity()),!this.paused&&this.fastRiverFlowTime<900&&0===this.timeCounter&&this.fastRiverFlowTime++,!this.paused&&this.fastRiverFlowTime>=900&&0===this.timeCounter&&(this.fastRiverFlowTime=0,this.decreaseVelocity()),this.bubbleValue>=2&&0===this.timeCounter&&0===this.fastRiverFlowTime&&this.gameView.redCrossInit(),this.frameId=requestAnimationFrame(this.animate.bind(this,e)))}play(){this.player=new i(this.canvas),this.gameView=new v(canvas),this.playing=!0,this.animate(this.ctx),setTimeout((()=>{V.volume=.2,V.loop=!0,V.play()}),500)}renderScore(){L.innerHTML=`${this.score}`}renderLives(){I.innerHTML=`<i id="heart-icon" class="fa-solid fa-heart"></i>${this.lives}`}listenForPauseEvent(){addEventListener("keydown",(e=>{"Space"!==e.code||this.gameOff||(this.numOfPauses++,this.numOfPauses<3&&this.togglePause())}))}restart(){this.gameOff=!1,R.remove(),R=document.createElement("section"),I=document.createElement("h3"),L=document.createElement("h3"),R.setAttribute("id","player-stat-container"),I.setAttribute("id","lives"),L.setAttribute("id","score")}togglePause(){const e=document.querySelector("#pause-modal-container"),t=document.querySelector("#countdown"),i=document.querySelector("#pause-header");if(this.paused){this.muted||(V.volume=.2,V.loop=!0,V.play());let s=3;i.innerHTML="Resume in:";const o=setInterval((()=>{s<=0&&(clearInterval(o),i.innerHTML="Paused",this.numOfPauses=0,this.paused=!1,e.style.display="none",requestAnimationFrame(this.animate.bind(this,this.ctx))),t.innerHTML=`${s}`,s--}),1e3)}else V.pause(),this.paused=!0,e.style.display="flex",t.innerHTML="",cancelAnimationFrame(this.frameId)}increaseVelocity(){E.style.display="none",this.secondsLeftBeforeSpeedIncrease=300,this.bubbleValue++,this.bubbleValue%2==0&&this.playerVelo++,k.play(),this.gameView.increaseVelocities([this.gameView.rocks,this.gameView.catchables,this.gameView.rivers])}decreaseVelocity(){this.gameView.decreaseVelocities([this.gameView.rocks,this.gameView.catchables,this.gameView.rivers])}eventListeners(){addEventListener("keydown",(e=>{"ArrowLeft"===e.code&&(this.fastRiverFlowTime<900&&0===this.timeCounter?this.player.velocityL=-this.playerVelo:this.player.velocityL=-3,this.player.paddling=!0),"ArrowRight"===e.code&&(this.fastRiverFlowTime<900&&0===this.timeCounter?this.player.velocityR=this.playerVelo:this.player.velocityR=3,this.player.paddling=!0)})),addEventListener("keyup",(e=>{"ArrowLeft"===e.code&&(this.player.velocityL=0,this.player.paddling=!1),"ArrowRight"===e.code&&(this.player.velocityR=0,this.player.paddling=!1)})),addEventListener("keydown",(e=>{"KeyM"!==e.code||this.gameOff||(!1===this.muted?(this.muted=!0,T.style.display="none",S.style.display="flex",V.pause()):(this.muted=!1,S.style.display="none",T.style.display="flex",V.volume=.2,V.loop=!0,V.play()))}))}collided(e,t){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}checkRockCollisions(){let e=!1;for(let t of this.gameView.rocks)if(this.collided(t,this.player)){if(e=!0,this.lives>0&&!this.collisionOccured){this.lives>1&&x.play(),this.lives--,this.collisionOccured=!0;break}if(this.lives>0&&this.collisionOccured)break;V.pause(),this.gameOff=!0,document.querySelector("#final-score").innerHTML=`${this.score}`,document.querySelector("#game-over-modal").style.display="flex",C.play();break}e||(this.collisionOccured=!1)}checkCatchableCollisions(){this.gameView.catchables.forEach(((e,t)=>{this.collided(e,this.player)&&(e instanceof o?(b.play(),this.gameView.catchables[t].caught=!0,this.score+=this.bubbleValue):e instanceof h&&(w.play(),this.gameView.catchables[t].caught=!0,this.lives++))}))}}const M=document.querySelector(".main-container"),O=document.getElementById("canvas");O.width=800,O.height=600;const F=new Audio("assets/audio/highflow-river.mp3"),P=document.querySelector("#home-page"),H=document.querySelector("#how-to-page"),z=document.querySelector("#play-btn"),$=document.querySelector("#how-to-btn"),j=document.querySelector("#go-back-btn"),U=document.querySelector("#play-again-btn"),D=document.querySelector("#go-to-hp-btn"),K=document.querySelector("#game-over-modal"),G=document.querySelector("#hp-options"),J=document.querySelector("#loader"),N=document.querySelector("#body"),Q=document.querySelector("#mute"),W=document.querySelector("#unmute");let X;addEventListener("DOMContentLoaded",(e=>{setTimeout((()=>{N.style.backgroundImage="url('assets/images/bg-img3.jpg')"}),1e3)})),z.addEventListener("click",(e=>{G.style.display="none",J.style.display="flex",setTimeout((()=>{P.style.display="none",F.pause(),M.style.display="flex",X=new B(O)}),2e3)})),Q.addEventListener("click",(()=>{Q.style.display="none",W.style.display="flex",F.pause()})),W.addEventListener("click",(()=>{W.style.display="none",Q.style.display="flex",F.loop=!0,F.play()})),$.addEventListener("click",(e=>{P.style.display="none",H.style.display="flex"})),j.addEventListener("click",(e=>{H.style.display="none",P.style.display="flex"})),U.addEventListener("click",(e=>{K.style.display="none",X=new B(O)})),D.addEventListener("click",(e=>{P.style.display="flex",G.style.display="flex",J.style.display="none",Q.style.display="none",W.style.display="flex",M.style.display="none",K.style.display="none"}))}()}();
//# sourceMappingURL=main.js.map